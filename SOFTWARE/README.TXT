Arduino example:

Tested with Arduino boards with ATmega2560 and ESP32 boards (Olimex ESP32-EVB). Refer to the comments in the .ino sketch - make sure to download all the files (library and header files; and not just the .ino)

PlatformIO example:

Made and tested with Olimex ESP32-EVB using PlatformIO 3.6.0a3